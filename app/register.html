<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>小米账号-登录</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/register.css">
</head>

<body>
    <!-- 头部 -->
    <section id="header_wrap">
        <section class="header content">
            <div class="logo">
                <h1><a href=""></a></h1>
            </div>
        </section>
    </section>
    <!-- <div class="banner">
            <img class="img" src="images/register/banner.jpg" alt="">
    </div> -->
    <!-- 表单 -->
    <section id="register_wrap">
        <section class="register content clearfix">
            <div class="regForm">
                <div class="tabs">
                    <a href="" class="left">账号登录</a>
                    <span></span>
                    <a href="" class="right">扫码登录</a>
                </div>
                <div class="regInp">
                    <form action="" class="form_wrap">
                        <input type="text" name="username" placeholder="邮箱/手机号码/小米ID">
                        <input type="password" name="pwd" placeholder="密码">
                        <input type="button" class="btn" value="登录">
                        <p class="clearfix">
                            <span><a href="">手机短信登录/注册</a></span>
                            <span>
                                <a href="login.html">立即注册</a> | <a href="">忘记密码？</a>
                            </span>
                        </p>
                    </form>
                    <div class="fie">
                        <fieldset class="tit">
                            <legend align="center" class="oth">其他方式登录</legend>
                        </fieldset>
                        <ul>
                            <li><a href=""><i class="icons_type"></i></a></li>
                            <li><a href=""><i class="icons_type"></i></a></li>
                            <li><a href=""><i class="icons_type"></i></a></li>
                            <li><a href=""><i class="icons_type"></i></a></li>
                        </ul>
                    </div>
                </div>
                <div class="saoma">
                    <img class="ewm" src="images/register/download.png" alt="">
                    <p>使用 <span>小米商城APP</span> 扫一扫</p>
                    <p>小米手机可打开「设置」>「小米帐号」扫码登录</p>
                </div>
            </div>
        </section>
    </section>
    <!-- 底部 -->
    <footer>
        <p>
            <a href="">简体</a> | <a href="">繁体</a> | <a href="">English</a> | <a href="">常见问题</a> | <a href="">隐私政策</a>
        </p>
        <p>小米公司版权所有-京ICP备10046444-<img src="images/register/ghs.png" alt=""> 京公网安备11010802020134号-京ICP证110507号</p>
    </footer>
    <script src="js/ajax.js"></script>
    <script>
        class Reg {
            constructor() {
                this.form = document.querySelector('.form_wrap');
                this.user = this.form['username'];
                this.pwd = this.form['pwd'];
            }
            init() {
               this.ajax();
               this.ister();
            }
            ister(){
                this.user.onfocus = function(){
                    
                }
            }
            ajax() {
                var $form_wrap = document.querySelector('.form_wrap');
                var $btn = document.querySelector('.btn');
                $btn.onclick = function (e) {
                    e = e || event;
                    e.preventDefault();
                    sendAjax('php/register.php', {
                        type: 'POST',
                        data: {
                            username: $form_wrap['username'].value,
                            pwd: $form_wrap['pwd'].value,
                        },
                        success(data) {
                            console.log(data);
                            let {
                                code,
                                msg,
                                data: _data
                            } = JSON.parse(data);
                            if (code == 200) {
                                //    var username = _data.name;
                                localStorage.name = _data.name;
                                location.href = 'wo.html?name=' + localStorage.name;
                            } else {
                                alert(msg);
                            }
                        }
                    })
                }
            }
        }
        window.onload = function(){
            new Reg().init();
        }
    </script>
</body>

</html>